

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Xianrui Xie">
  <meta name="keywords" content="">
  
    <meta name="description" content="数据结构课程笔记 ep3">
<meta property="og:type" content="article">
<meta property="og:title" content="栈和队列">
<meta property="og:url" content="https://louisxxr.github.io/2023/03/02/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97/index.html">
<meta property="og:site_name" content="Louisxxr">
<meta property="og:description" content="数据结构课程笔记 ep3">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221004212203820.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221004235548146.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221006123601271.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221230174944828.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221230180100513.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221231151850066.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221231165641784.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221231194329564.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20230104175516366.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20230104175538054.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20230104175554562.png">
<meta property="og:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20230104175620938.png">
<meta property="article:published_time" content="2023-03-02T08:37:05.000Z">
<meta property="article:modified_time" content="2023-03-02T14:46:17.867Z">
<meta property="article:author" content="Xianrui Xie">
<meta property="article:tag" content="数据结构课程笔记">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://louisxxr.github.io/2023/03/02/img/ep3/image-20221004212203820.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>栈和队列 - Louisxxr</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"louisxxr.github.io","root":"/","version":"1.9.2","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 60vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Louis&#39;s blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/bannerimg.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="栈和队列"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-03-02 16:37" pubdate>
          2023年3月2日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          28k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          155 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">栈和队列</h1>
            
            
              <div class="markdown-body">
                
                <p>数据结构课程笔记 ep3</p>
<span id="more"></span>



<h2 id="栈和队列"><a href="#栈和队列" class="headerlink" title="栈和队列"></a>栈和队列</h2><h3 id="1-栈的定义与实现（后进先出）"><a href="#1-栈的定义与实现（后进先出）" class="headerlink" title="1 - 栈的定义与实现（后进先出）"></a>1 - 栈的定义与实现（后进先出）</h3><h4 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h4><p><strong>栈（Stack）</strong>是限定仅在表尾进行插入和删除操作的线性表。进行插入和删除操作的一端（表尾）为<strong>栈顶（Top）</strong>，另一端（表头）为<strong>栈底（Base）</strong>。当表中没有元素时，称为<strong>空栈</strong>。</p>
<h4 id="抽象数据类型"><a href="#抽象数据类型" class="headerlink" title="抽象数据类型"></a>抽象数据类型</h4><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ADT Stack &#123;<br>	数据对象：<br>		D=&#123;a_i<span class="hljs-pattern-match">|a<span class="hljs-constructor">_i</span>∈<span class="hljs-constructor">ElemSet</span>,i=1,2,<span class="hljs-operator">...</span>,n&#125;</span><br><span class="hljs-pattern-match">	数据关系：</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">R</span>=&#123;&lt;a<span class="hljs-constructor">_i</span>-1,a<span class="hljs-constructor">_i</span>&gt;|a<span class="hljs-constructor">_i</span>-1,a<span class="hljs-constructor">_i</span>∈<span class="hljs-constructor">D</span>,i=2,<span class="hljs-operator">...</span>,n&#125;</span><br><span class="hljs-pattern-match">		(约定a<span class="hljs-constructor">_n</span>为栈顶，a<span class="hljs-constructor">_1</span>为栈底)</span><br><span class="hljs-pattern-match">	基本操作：</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">InitStack(&amp;S)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">DestroyStack(&amp;S)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">StackLength(S)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">StackEmpty(S)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">GetTop(S,&amp;<span class="hljs-params">e</span>)</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 需判空</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">ClearStack(&amp;S)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">Push(&amp;S,<span class="hljs-params">e</span>)</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 需判满</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">Pop(&amp;S,&amp;<span class="hljs-params">e</span>)</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 需判空</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">StackTravers(S,<span class="hljs-params">visit</span>()</span>)</span><br><span class="hljs-pattern-match">&#125; <span class="hljs-constructor">ADT</span> <span class="hljs-constructor">Stack</span></span><br></code></pre></td></tr></table></figure>

<h4 id="用顺序存储结构实现栈"><a href="#用顺序存储结构实现栈" class="headerlink" title="用顺序存储结构实现栈"></a>用顺序存储结构实现栈</h4><p>利用一组地址连续的存贮单元依次存放从栈底到栈顶的若干数据元素。</p>
<h5 id="第一种实现：定长数组"><a href="#第一种实现：定长数组" class="headerlink" title="第一种实现：定长数组"></a>第一种实现：定长数组</h5><p><strong>规定</strong>：栈顶指针Top指向最后一个元素</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ----------Sqstack.h----------</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> SQSTACK_H_</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SQSTACK_H_</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 100 <span class="hljs-comment">// 栈的最大容量</span></span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> T;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    T   Stack[MAXSIZE]; <span class="hljs-comment">// 静态分配，相应的动态分配方式为：T* Stack;</span><br>    <span class="hljs-type">int</span> Top; <span class="hljs-comment">// 栈顶元素在数组中的位置</span><br>&#125; SqStack;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(SqStack &amp;S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackLength</span><span class="hljs-params">(SqStack S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackEmpty</span><span class="hljs-params">(SqStack S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetTop</span><span class="hljs-params">(SqStack S,T &amp;e)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ClearStack</span><span class="hljs-params">(SqStack &amp;S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(SqStack &amp;S,T e)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(SqStack &amp;S,T &amp;e)</span></span>;<br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ----------Sqstack.cpp----------</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Sqstack.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(SqStack &amp;S)</span> </span>&#123;<br>    S.Top=<span class="hljs-number">-1</span>; <span class="hljs-comment">// 栈空</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackLength</span><span class="hljs-params">(SqStack S)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> S.Top+<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackEmpty</span><span class="hljs-params">(SqStack S)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> S.Top&lt;<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetTop</span><span class="hljs-params">(SqStack S,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S.Top&lt;<span class="hljs-number">0</span>) <span class="hljs-comment">// 判空</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    e=S.Stack[S.Top];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ClearStack</span><span class="hljs-params">(SqStack &amp;S)</span> </span>&#123;<br>    S.Top=<span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(SqStack &amp;S,T e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S.Top&gt;=MAXSIZE<span class="hljs-number">-1</span>) <span class="hljs-comment">// 判满</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    S.Stack[++S.Top]=e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(SqStack &amp;S,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S.Top&lt;<span class="hljs-number">0</span>) <span class="hljs-comment">// 判空</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	e=S.Stack[S.Top--];<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="第二种实现：不定长数组"><a href="#第二种实现：不定长数组" class="headerlink" title="第二种实现：不定长数组"></a>第二种实现：不定长数组</h5><p><strong>规定</strong>：栈顶指针Top指向最后一个元素的下一个位置</p>
<img src="..\img\ep3\image-20221004212203820.png" srcset="/img/loading.gif" lazyload alt="image-20221004212203820" style="zoom:25%;" />

<p><strong>判满</strong>：S.Top-S.Base&gt;&#x3D;S.Stacksize</p>
<p><strong>判空</strong>：S.Base&#x3D;&#x3D;S.Top</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ----------Sqstack.h----------</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> SQSTACK_H_</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SQSTACK_H_</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> STACK_INIT_SIZE 80</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> STACK_INCREMENT 10</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> T;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    T*  Base;<br>    T*  Top;<br>    <span class="hljs-type">int</span> Stacksize;<br>&#125; SqStack;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(SqStack &amp;S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackLength</span><span class="hljs-params">(SqStack S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackEmpty</span><span class="hljs-params">(SqStack S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetTop</span><span class="hljs-params">(SqStack S,T &amp;e)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ClearStack</span><span class="hljs-params">(SqStack &amp;S)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(SqStack &amp;S,T e)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(SqStack &amp;S,T &amp;e)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DestroyStack</span><span class="hljs-params">(SqStack &amp;S)</span></span>;<br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ----------Sqstack.cpp----------</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Sqstack.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(SqStack &amp;S)</span> </span>&#123;<br>    S.Base=(T*)<span class="hljs-built_in">malloc</span>(STACK_INIT_SIZE*<span class="hljs-built_in">sizeof</span>(T));<br>    <span class="hljs-keyword">if</span> (!S.Base)<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    S.Top=S.Base;<br>    S.Stacksize=STACK_INIT_SIZE;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackLength</span><span class="hljs-params">(SqStack S)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> S.Top-S.Base;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackEmpty</span><span class="hljs-params">(SqStack S)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> S.Base==S.Top?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetTop</span><span class="hljs-params">(SqStack S,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S.Base==S.Top) <span class="hljs-comment">// 判空</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    e=*(S.Top<span class="hljs-number">-1</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ClearStack</span><span class="hljs-params">(SqStack &amp;S)</span> </span>&#123;<br>    <span class="hljs-built_in">free</span>(S.Base);<br>    S.Base=(T*)<span class="hljs-built_in">malloc</span>(STACK_INIT_SIZE*<span class="hljs-built_in">sizeof</span>(T));<br>    <span class="hljs-keyword">if</span> (!S.Base)<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    S.Top=S.Base;<br>    S.Stacksize=STACK_INIT_SIZE;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(SqStack &amp;S,T e)</span> </span>&#123;<br>    <span class="hljs-comment">// 判满，追加存储空间</span><br>	<span class="hljs-keyword">if</span> (S.Top-S.Base&gt;=S.Stacksize) &#123;<br>        S.Base=(T*)<span class="hljs-built_in">realloc</span>(S.Base,<span class="hljs-built_in">sizeof</span>(T)*(S.Stacksize+STACK_INCREMENT));<br>    	<span class="hljs-keyword">if</span> (!S.Base)<br>        	<span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    	S.Top=S.Base+S.Stacksize;<br>        S.Stacksize+=STACK_INCREMENT;<br>    &#125;<br>    *S.Top=e;<br>    S.Top++;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(SqStack &amp;S,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S.Base==S.Top) <span class="hljs-comment">// 判空</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    S.Top--;<br>    e=*S.Top;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DestroyStack</span><span class="hljs-params">(SqStack &amp;S)</span> </span>&#123;<br>    <span class="hljs-built_in">free</span>(S.Base);<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="第三种实现：共享栈"><a href="#第三种实现：共享栈" class="headerlink" title="第三种实现：共享栈"></a>第三种实现：共享栈</h5><p>如果在一个程序中需要使用多个栈，最好能采用多个栈共享空间的方法，即给多个栈分配一个足够大的数组空间，利用栈的动态特性，使其存储空间互相补充。</p>
<p>一种两个栈共享空间的方法是：将这两个栈的栈底设在数组的两端，让它们的栈顶向数组中间增长。这样当一个栈中元素较多时，就可以越过数组的中点，延伸到另一个栈的部分空间中去。当两个栈的栈顶相遇时，才会发生“上溢”。</p>
<img src="..\img\ep3\image-20221004235548146.png" srcset="/img/loading.gif" lazyload alt="image-20221004235548146" style="zoom:25%;" />

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 结构体声明</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 100</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> T;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    T   Stack[MAXSIZE];<br>	<span class="hljs-type">int</span> Top1,Top2;<br>&#125; DuStack;<br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 共享栈入栈</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(<span class="hljs-type">int</span> i,T e)</span> </span>&#123;<br>	<span class="hljs-keyword">if</span> (S.Top1==S.Top2<span class="hljs-number">-1</span>) <span class="hljs-comment">// 判满</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (i==<span class="hljs-number">1</span>) <span class="hljs-comment">// 对第一个栈进行入栈操作</span><br>        S.Stack[++S.Top1]=e;<br>    <span class="hljs-keyword">else</span> <span class="hljs-comment">// 对第二个栈进行入栈操作</span><br>        S.Stack[--S.Top2]=e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 共享栈出栈</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(<span class="hljs-type">int</span> i,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (i==<span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// 对第一个栈进行出栈操作</span><br>        <span class="hljs-keyword">if</span> (S.Top1==<span class="hljs-number">-1</span>) <span class="hljs-comment">// 判空</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>		<span class="hljs-keyword">else</span> &#123;<br>            e=S.Stack[S.Top1--];<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// 对第二个栈进行出栈操作</span><br>        <span class="hljs-keyword">if</span> (S.Top2==MAXSIZE) <span class="hljs-comment">// 判空</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">else</span> &#123;<br>            e=S.Stack[S.Top2++];<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="用链式存储结构实现栈"><a href="#用链式存储结构实现栈" class="headerlink" title="用链式存储结构实现栈"></a>用链式存储结构实现栈</h4><img src="..\img\ep3\image-20221006123601271.png" srcset="/img/loading.gif" lazyload alt="image-20221006123601271" style="zoom:25%;" />

<p>上面一种实现 Pop 操作时间复杂度为 O(n)，故使用下面一种实现。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 结构体声明</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> T;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Snode</span> &#123;<br>    T Data;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Snode</span>* Next;<br>&#125; *LinkStack;<br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 链式栈入栈</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(LinkStack &amp;Top,T e)</span> </span>&#123;<br>    LinkStack t=(LinkStack)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Snode));<br>    <span class="hljs-keyword">if</span> (t==<span class="hljs-literal">NULL</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// 内存无可用空间，栈上溢</span><br>	t-&gt;Data=e;<br>    t-&gt;Next=Top;<br>    Top=t;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 链式栈出栈</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(LinkStack &amp;Top,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Top==<span class="hljs-literal">NULL</span>) <span class="hljs-comment">// 判空</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    LinkStack p=Top;<br>    Top=p-&gt;Next;<br>    e=p-&gt;Data;<br>    <span class="hljs-built_in">free</span> (p);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>对于链栈，不会产生单个栈满而其余栈空的情形，只有当系统空间全部用完，malloc 过程无法实现时才会发生上溢，因此多个链栈共享空间也就是自然的事了。</p>
<h4 id="顺序栈还是链式栈？"><a href="#顺序栈还是链式栈？" class="headerlink" title="顺序栈还是链式栈？"></a>顺序栈还是链式栈？</h4><p>栈广泛应用于程序设计中。当要解决的问题具有先进后出的特点时就可以用栈。</p>
<p>顺序栈、链栈的基本操作的时间复杂度都是 O(1)。顺序栈需要预先分配空间，链栈动态生成。如果需要访问内部节点，顺序栈更快。当最大需要容量事先不能估计时，采用链式存储结构是有效的方法。</p>
<h3 id="2-栈的应用举例"><a href="#2-栈的应用举例" class="headerlink" title="2 - 栈的应用举例"></a>2 - 栈的应用举例</h3><h4 id="例一：数制转换"><a href="#例一：数制转换" class="headerlink" title="例一：数制转换"></a>例一：数制转换</h4><h5 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h5><p>(1348)10 &#x3D; (2504)8，其运算过程如下：</p>
<table>
<thead>
<tr>
<th>N</th>
<th>N&#x2F;8</th>
<th>N%8</th>
</tr>
</thead>
<tbody><tr>
<td>1348</td>
<td>168</td>
<td>4</td>
</tr>
<tr>
<td>168</td>
<td>21</td>
<td>0</td>
</tr>
<tr>
<td>21</td>
<td>2</td>
<td>5</td>
</tr>
<tr>
<td>2</td>
<td>0</td>
<td>2</td>
</tr>
</tbody></table>
<h5 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h5><p>N%8 从上往下得出，从下往上输出，用栈实现。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> stacksize 100</span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> &#123;</span><br>    <span class="hljs-type">int</span> base[stacksize];<br>    <span class="hljs-type">int</span> top;<br>&#125; <span class="hljs-built_in">stack</span>;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">InitStack</span><span class="hljs-params">(<span class="hljs-built_in">stack</span>* s)</span> &#123;<br>    s-&gt;top=<span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">StackEmpty</span><span class="hljs-params">(<span class="hljs-built_in">stack</span>* s)</span> &#123;<br>    <span class="hljs-keyword">return</span> s-&gt;top&lt;<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">Push</span><span class="hljs-params">(<span class="hljs-built_in">stack</span>* s,<span class="hljs-type">int</span> e)</span> &#123; <span class="hljs-comment">// C语言风格的写法</span><br>    <span class="hljs-keyword">if</span> (s-&gt;top&gt;=stacksize<span class="hljs-number">-1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    s-&gt;base[++s-&gt;top]=e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">Pop</span><span class="hljs-params">(<span class="hljs-built_in">stack</span>* s,<span class="hljs-type">int</span>* e)</span> &#123;<br>    <span class="hljs-keyword">if</span> (s-&gt;top&lt;<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    *e=s-&gt;base[s-&gt;top--];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">PrintConversion</span><span class="hljs-params">(<span class="hljs-type">int</span> format,<span class="hljs-type">int</span> n)</span> &#123;<br>    <span class="hljs-built_in">stack</span> s;<br>    InitStack(&amp;s);<br>    <span class="hljs-keyword">while</span> (n) &#123;<br>        Push(&amp;s,n%format);<br>        n/=format;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (!StackEmpty(&amp;s)) &#123;<br>        <span class="hljs-type">int</span> e;<br>        Pop(&amp;s,&amp;e);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>,e);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> n; <span class="hljs-comment">// n&lt;=10</span><br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>,&amp;n);<br>    PrintConversion(<span class="hljs-number">8</span>,n);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="例二：括号的匹配检验"><a href="#例二：括号的匹配检验" class="headerlink" title="例二：括号的匹配检验"></a>例二：括号的匹配检验</h4><h5 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h5><p>假设在表达式中，<code>[([][])]</code>为正确的格式，<code>[([)[])]</code>或<code>([][])]</code>或<code>[([][])</code>均为不正确的格式。</p>
<h5 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h5><p>简化实现，假设括号都为圆括号：</p>
<ol>
<li>凡出现左括弧：进栈</li>
<li>凡出现右括弧：首先检查栈空，若栈空，则表明该“右括弧”多余，<strong>表达式不正确</strong>；否则和栈顶元素比较，若匹配，则“左括弧出栈”，否则<strong>表达式不正确</strong></li>
<li>表达式检验结束时：检查栈空，若栈空，则表达式正确，否则<strong>表达式不正确</strong></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Matching</span><span class="hljs-params">(String &amp;exp)</span> </span>&#123;<br>    Stack s;<br>    <span class="hljs-built_in">InitStack</span>(s);<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">1</span>,state=<span class="hljs-number">1</span>; <span class="hljs-comment">// 表达式正确状态为1，不正确为0</span><br>    <span class="hljs-keyword">while</span> (i&lt;=<span class="hljs-built_in">Length</span>(exp)&amp;&amp;state) &#123;<br>        <span class="hljs-keyword">switch</span> (exp[i]) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;(&quot;</span>:<br>                <span class="hljs-built_in">Push</span>(s,exp[i]);<br>                i++;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;)&quot;</span>:<br>                <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">StackEmpty</span>(s)&amp;&amp;<span class="hljs-built_in">GetTop</span>(s)==<span class="hljs-string">&quot;(&quot;</span>)<br>                    <span class="hljs-built_in">Pop</span>(s);<br>                	i++;<br>                <span class="hljs-keyword">else</span><br>                    state=<span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">StackEmpty</span>(s)&amp;&amp;state)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="例三：迷宫问题-Maze-Problem"><a href="#例三：迷宫问题-Maze-Problem" class="headerlink" title="例三：迷宫问题 Maze Problem"></a>例三：迷宫问题 Maze Problem</h4><h5 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h5><p><a target="_blank" rel="noopener" href="https://www.nowcoder.com/questionTerminal/cf24906056f4488c9ddb132f317e03bc">迷宫问题</a></p>
<h5 id="实现（栈实现）"><a href="#实现（栈实现）" class="headerlink" title="实现（栈实现）"></a>实现（栈实现）</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">15</span>;<br><br><span class="hljs-type">int</span> n,m;<br><span class="hljs-type">int</span> maze[N][N];<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>	<span class="hljs-type">int</span> top;<br>	pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; s[N*N];<br>&#125; stack;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Init</span><span class="hljs-params">(stack &amp;st)</span> </span>&#123;<br>	st.top=<span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isEmpty</span><span class="hljs-params">(stack &amp;st)</span> </span>&#123;<br>	<span class="hljs-keyword">return</span> st.top&lt;<span class="hljs-number">0</span>?<span class="hljs-literal">true</span>:<span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function">pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; <span class="hljs-title">GetTop</span><span class="hljs-params">(stack &amp;st)</span> </span>&#123;<br>	<span class="hljs-keyword">return</span> <span class="hljs-built_in">make_pair</span>(st.s[st.top].first,st.s[st.top].second);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Push</span><span class="hljs-params">(stack &amp;st,pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; l)</span> </span>&#123;<br>	++st.top;<br>	st.s[st.top].first=l.first;<br>	st.s[st.top].second=l.second;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Pop</span><span class="hljs-params">(stack &amp;st)</span> </span>&#123;<br>	--st.top;<br>&#125;<br><br>stack st;<br><br><span class="hljs-type">int</span> d[N][N]; <span class="hljs-comment">// 规定：东0 南1 西2 北3</span><br><span class="hljs-type">int</span> dr[]=&#123;<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> dc[]=&#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">-1</span>&#125;;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	cin &gt;&gt; n &gt;&gt; m;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>		<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;m;j++)<br>			cin &gt;&gt; maze[i][j];<br>	<span class="hljs-built_in">Init</span>(st);<br>	<span class="hljs-built_in">memset</span>(d,<span class="hljs-number">-1</span>,<span class="hljs-keyword">sizeof</span> d);<br>	pair&lt;<span class="hljs-type">int</span>,<span class="hljs-type">int</span>&gt; l=<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>	<span class="hljs-keyword">do</span> &#123;<br>		<span class="hljs-type">int</span> i;<br>		<span class="hljs-keyword">for</span> (i=d[l.first][l.second]+<span class="hljs-number">1</span>;i&lt;<span class="hljs-number">4</span>;i++) &#123;<br>			<span class="hljs-type">int</span> r=l.first+dr[i];<br>			<span class="hljs-type">int</span> c=l.second+dc[i];<br>			<span class="hljs-keyword">if</span> (maze[r][c]==<span class="hljs-number">0</span>&amp;&amp;r&gt;=<span class="hljs-number">0</span>&amp;&amp;r&lt;n&amp;&amp;c&gt;=<span class="hljs-number">0</span>&amp;&amp;c&lt;m&amp;&amp;(r!=<span class="hljs-built_in">GetTop</span>(st).first||c!=<span class="hljs-built_in">GetTop</span>(st).second))<br>				<span class="hljs-keyword">break</span>;<br>		&#125;<br>		<span class="hljs-keyword">if</span> (i&lt;<span class="hljs-number">4</span>) &#123;<br>			<span class="hljs-built_in">Push</span>(st,l);<br>			d[l.first][l.second]=i;<br>			l.first+=dr[i];<br>			l.second+=dc[i];<br>		&#125;<br>		<span class="hljs-keyword">else</span> &#123;<br>			<span class="hljs-keyword">if</span> (l.first==n<span class="hljs-number">-1</span>&amp;&amp;l.second==m<span class="hljs-number">-1</span>) &#123;<br>				<span class="hljs-built_in">Push</span>(st,l);<br>				<span class="hljs-keyword">break</span>;<br>			&#125;<br>			<span class="hljs-keyword">else</span> &#123;<br>				l.first=<span class="hljs-built_in">GetTop</span>(st).first;<br>				l.second=<span class="hljs-built_in">GetTop</span>(st).second;<br>				<span class="hljs-built_in">Pop</span>(st);<br>			&#125;<br>		&#125;<br>	&#125; <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isEmpty</span>(st));<br>	stack st2;<br>	<span class="hljs-built_in">Init</span>(st2);<br>	<span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isEmpty</span>(st)) &#123;<br>		<span class="hljs-built_in">Push</span>(st2,<span class="hljs-built_in">GetTop</span>(st));<br>		<span class="hljs-built_in">Pop</span>(st);<br>	&#125;<br>	<span class="hljs-keyword">while</span> (!<span class="hljs-built_in">isEmpty</span>(st2)) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;(&quot;</span> &lt;&lt; <span class="hljs-built_in">GetTop</span>(st2).first &lt;&lt; <span class="hljs-string">&quot;,&quot;</span> &lt;&lt; <span class="hljs-built_in">GetTop</span>(st2).second &lt;&lt; <span class="hljs-string">&quot;)&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-built_in">Pop</span>(st2);<br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="例四：表达式求值"><a href="#例四：表达式求值" class="headerlink" title="例四：表达式求值"></a>例四：表达式求值</h4><h5 id="背景-1"><a href="#背景-1" class="headerlink" title="背景"></a>背景</h5><p>在计算机中，表达式求值广为使用的是一种简单直观的算法“算符优先法”。它是根据算符优先关系的规定来实现对表达式的<strong>编译或解释</strong>的。它的实现是栈应用的又一个典型例子。</p>
<p>为了叙述的简洁，仅讨论简单算术表达式求值的问题，这种表达式仅包含加、减、乘、除、左右括号以及约定的结束符“#”六种算符。不难将它推广到更一般的表达式上。</p>
<p>以下是简单算术表达式中涉及到的算符的优先关系（左边栏算符和上边栏算符是表达式中相继出现的两个算符；左边栏算符&gt;&#x3D;&lt;上边栏算符）：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">+</th>
<th align="center">-</th>
<th align="center">*</th>
<th align="center">&#x2F;</th>
<th align="center">(</th>
<th align="center">)</th>
<th align="center">#</th>
</tr>
</thead>
<tbody><tr>
<td align="center">+</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
</tr>
<tr>
<td align="center">-</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&lt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
</tr>
<tr>
<td align="center">&#x2F;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&lt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
</tr>
<tr>
<td align="center">(</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&#x3D;</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">)</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
<td align="center"></td>
<td align="center">&gt;</td>
<td align="center">&gt;</td>
</tr>
<tr>
<td align="center">#</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center">&lt;</td>
<td align="center"></td>
<td align="center">&#x3D;</td>
</tr>
</tbody></table>
<h5 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h5><p>两个工作栈：</p>
<ul>
<li>OPTR 栈：寄存算符</li>
<li>OPND 栈：寄存操作数或运算结果</li>
</ul>
<p>算法基本思想：</p>
<ol>
<li>初始化 OPTR 栈和 OPND 栈，将起始符“#” Push 进入 OPTR 栈；</li>
<li>读入表达式中的每个字符：若是操作数，则进 OPND 栈；若是算符，则和 OPTR 栈的栈顶算符比较优先关系后作<strong>相应操作</strong>，直至整个表达式求值完毕（即 OPTR 栈的栈顶元素和当前读入的字符均为“#”）；</li>
<li>相应操作为：<ul>
<li>若后来算符 &gt; 栈顶算符，则后来算符入栈；</li>
<li>若后来算符 &#x3D; 栈顶算符（括号情况），则 Pop 一个算符，后来算符不入栈（脱括号并接收下一字符）；</li>
<li>若后来算符 &lt; 栈顶算符，则 Pop 一个算符和两个操作数，将运算结果 Push 进入 OPND 栈，继续比较至后来算符 &gt; 或 &#x3D; 栈顶算符。</li>
</ul>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 为简化，仅支持0~9的简单算术表达式求值，每步四则运算结果都为0~9</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    <span class="hljs-type">char</span> s[<span class="hljs-number">100</span>];<br>    <span class="hljs-type">int</span> top;<br>&#125; Stack;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(Stack &amp;S)</span> </span>&#123;<br>    S.top=<span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">GetTop</span><span class="hljs-params">(Stack S)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> S.s[S.top];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Push</span><span class="hljs-params">(Stack &amp;S,<span class="hljs-type">char</span> e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S.top&gt;=<span class="hljs-number">99</span>)<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    S.s[++S.top]=e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(Stack &amp;S,<span class="hljs-type">char</span> &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (S.top&lt;<span class="hljs-number">0</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	e=S.s[S.top--];<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isNumber</span><span class="hljs-params">(<span class="hljs-type">char</span> c)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> c&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="hljs-string">&#x27;9&#x27;</span>?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">Precede</span><span class="hljs-params">(<span class="hljs-type">char</span> stop,<span class="hljs-type">char</span> c)</span> </span>&#123;<br>    <span class="hljs-keyword">switch</span> (stop) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;=&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<br>        	<span class="hljs-keyword">switch</span> (c) &#123;<br>        		<span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;=&#x27;</span>;<br>			&#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">Operate</span><span class="hljs-params">(<span class="hljs-type">char</span> a,<span class="hljs-type">char</span> theta,<span class="hljs-type">char</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;+&#x27;</span>)<br>        <span class="hljs-keyword">return</span> a+b-<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;-&#x27;</span>)<br>        <span class="hljs-keyword">return</span> a-b+<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;*&#x27;</span>)<br>        <span class="hljs-built_in">return</span> (a-<span class="hljs-string">&#x27;0&#x27;</span>)*(b-<span class="hljs-string">&#x27;0&#x27;</span>)+<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;/&#x27;</span>)<br>        <span class="hljs-built_in">return</span> (a-<span class="hljs-string">&#x27;0&#x27;</span>)/(b-<span class="hljs-string">&#x27;0&#x27;</span>)+<span class="hljs-string">&#x27;0&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">EvaluateExpression</span><span class="hljs-params">()</span> </span>&#123;<br>    Stack OPND,OPTR;<br>    <span class="hljs-built_in">InitStack</span>(OPND);<br>    <span class="hljs-built_in">InitStack</span>(OPTR);<br>    <span class="hljs-built_in">Push</span>(OPTR,<span class="hljs-string">&#x27;#&#x27;</span>);<br>    <span class="hljs-type">char</span> c=<span class="hljs-built_in">getchar</span>();<br>    <span class="hljs-keyword">while</span> (c!=<span class="hljs-string">&#x27;#&#x27;</span>||<span class="hljs-built_in">GetTop</span>(OPTR)!=<span class="hljs-string">&#x27;#&#x27;</span>) &#123; <span class="hljs-comment">// 退出条件：c==&#x27;#&#x27;&amp;&amp;GetTop(OPTR)==&#x27;#&#x27;</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNumber</span>(c)) &#123;<br>            <span class="hljs-built_in">Push</span>(OPND,c);<br>            c=<span class="hljs-built_in">getchar</span>();<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">Precede</span>(<span class="hljs-built_in">GetTop</span>(OPTR),c)) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>:<br>                <span class="hljs-built_in">Push</span>(OPTR,c);<br>                c=<span class="hljs-built_in">getchar</span>();<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;=&#x27;</span>:<br>            	<span class="hljs-type">char</span> x;<br>                <span class="hljs-built_in">Pop</span>(OPTR,x);<br>                c=<span class="hljs-built_in">getchar</span>();<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>:<br>                <span class="hljs-type">char</span> theta,a,b;<br>                <span class="hljs-built_in">Pop</span>(OPTR,theta);<br>                <span class="hljs-built_in">Pop</span>(OPND,b);<br>                <span class="hljs-built_in">Pop</span>(OPND,a);<br>                <span class="hljs-built_in">Push</span>(OPND,<span class="hljs-built_in">Operate</span>(a,theta,b));<br>                <span class="hljs-keyword">break</span>; <span class="hljs-comment">// 继续比较至后来算符&gt;或=栈顶算符</span><br>        &#125;<br>    &#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-built_in">GetTop</span>(OPND);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%c\n&quot;</span>,<span class="hljs-built_in">EvaluateExpression</span>());<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="另一种实现"><a href="#另一种实现" class="headerlink" title="另一种实现"></a>另一种实现</h5><p>二元运算符表达式的另外三种表示方法：（以表达式 a * b + (c - d &#x2F; e) * f 为例）</p>
<ul>
<li><strong>前缀表达式</strong>：算符 操作数 1 操作数 2，原表达式转化为 +*ab*-c&#x2F;def</li>
<li><strong>中缀表达式</strong>：操作数 1 算符 操作数 2，原表达式转化为 a*b+c-d&#x2F;e*f</li>
<li><strong>后缀表达式</strong>：操作数 1 操作数 2 算符，原表达式转化为 ab*cde&#x2F;-f*+</li>
</ul>
<p>结论：</p>
<ol>
<li>操作数的相对次序相同</li>
<li>算符的相对次序不同</li>
<li>中缀表达式丢失括号信息，导致运算顺序不确定</li>
<li>前缀表达式运算规则为：连续出现的两个操作数和在它们之前且紧靠它们的算符构成一个最小表达式</li>
<li>后缀表达式运算规则为：每个算符和在它之前且紧靠它的两个操作数构成一个最小表达式</li>
</ol>
<p>所以，<strong>可以利用前缀表达式或后缀表达式实现表达式求值</strong>，以下为利用后缀表达式求值的思路：</p>
<ol>
<li><p><strong>将原表达式转化为后缀表达式</strong></p>
<p>后缀表达式的特点：原表达式中算符的运算顺序由它之后的一个算符决定，而后缀表达式中算符的运算顺序恰为其在表达式中的出现顺序，即优先级高的算符领先于优先级低的算符</p>
<p>算法描述：</p>
<ol>
<li>设置算符栈，栈底置“#”，表达式结束符也为“#”</li>
<li>读入表达式中的每个字符后判断并进行相关操作至栈空：<ul>
<li>若当前字符是操作数，则直接发送给后缀表达式</li>
<li>若当前字符是算符，则和栈顶算符比较优先关系后作相应操作：<ul>
<li>若当前算符 &gt; 栈顶算符，则当前算符入栈</li>
<li>若当前算符 &#x3D; 栈顶算符，即左右括号或结束符与栈底的“#”相遇的情况，则“(”或“#”出栈，“)”或“#”不入栈</li>
<li>若当前算符 &lt; 栈顶算符，则栈顶算符出栈发送给后缀表达式，继续比较直至“&gt;”或“&#x3D;”</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">isNumber</span><span class="hljs-params">(<span class="hljs-type">char</span> c)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> c&gt;=<span class="hljs-string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="hljs-string">&#x27;9&#x27;</span>?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">Precede</span><span class="hljs-params">(<span class="hljs-type">char</span> stop,<span class="hljs-type">char</span> c)</span> </span>&#123;<br>    <span class="hljs-keyword">switch</span> (stop) &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;=&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<br>            <span class="hljs-keyword">switch</span> (c) &#123;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;)&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>;<br>            &#125;<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<br>        	<span class="hljs-keyword">switch</span> (c) &#123;<br>        		<span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;*&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;/&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;(&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>;<br>                <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;#&#x27;</span>:<span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;=&#x27;</span>;<br>			&#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Transform</span><span class="hljs-params">(<span class="hljs-type">char</span> suffix[],<span class="hljs-type">char</span> exp[])</span> </span>&#123;<br>    Stack S;<br>    <span class="hljs-built_in">InitStack</span>(S);<br>    <span class="hljs-built_in">Push</span>(S,<span class="hljs-string">&#x27;#&#x27;</span>);<br>    <br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-type">char</span>* p=exp;<br>    <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">StackEmpty</span>(S)) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNumber</span>(*p)) &#123;<br>            suffix[i++]=*p;<br>            ++p;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">switch</span> (<span class="hljs-built_in">Precede</span>(<span class="hljs-built_in">GetTop</span>(S),*p)) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&lt;&#x27;</span>:<br>                <span class="hljs-built_in">Push</span>(S,*p);<br>                ++p;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;=&#x27;</span>:<br>                <span class="hljs-built_in">Pop</span>(S);<br>                ++p;<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;&gt;&#x27;</span>:<br>                suffix[i++]=<span class="hljs-built_in">Pop</span>(S);<br>                <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li><p><strong>后缀表达式求值</strong></p>
<p>算法描述：</p>
<ol>
<li>设置操作数栈</li>
<li>读入表达式中的每个字符后判断并进行相关操作至表达式读入完：<ul>
<li>若当前字符是操作数，则当前字符入栈</li>
<li>若当前字符是算符，则从栈中弹出两个数，运算结果入栈</li>
</ul>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 为简化，仅支持0~9的简单算术表达式求值，每步四则运算结果都为0~9</span><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">Operate</span><span class="hljs-params">(<span class="hljs-type">char</span> a,<span class="hljs-type">char</span> theta,<span class="hljs-type">char</span> b)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;+&#x27;</span>)<br>        <span class="hljs-keyword">return</span> a+b-<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;-&#x27;</span>)<br>        <span class="hljs-keyword">return</span> a-b+<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;*&#x27;</span>)<br>        <span class="hljs-built_in">return</span> (a-<span class="hljs-string">&#x27;0&#x27;</span>)*(b-<span class="hljs-string">&#x27;0&#x27;</span>)+<span class="hljs-string">&#x27;0&#x27;</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (theta==<span class="hljs-string">&#x27;/&#x27;</span>)<br>        <span class="hljs-built_in">return</span> (a-<span class="hljs-string">&#x27;0&#x27;</span>)/(b-<span class="hljs-string">&#x27;0&#x27;</span>)+<span class="hljs-string">&#x27;0&#x27;</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">char</span> <span class="hljs-title">EvaluateExpression</span><span class="hljs-params">(<span class="hljs-type">char</span> suffix[])</span> </span>&#123;<br>    Stack S;<br>    <span class="hljs-built_in">InitStack</span>(S);<br>    <br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (i!=<span class="hljs-built_in">strlen</span>(suffix)) &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNumber</span>(suffix[i]))<br>            <span class="hljs-built_in">Push</span>(S,suffix[i++]);<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">char</span> a=<span class="hljs-built_in">Pop</span>(S),b=<span class="hljs-built_in">Pop</span>(S);<br>            <span class="hljs-built_in">Push</span>(S,<span class="hljs-built_in">Operate</span>(b,suffix[i++],a)); <span class="hljs-comment">// 注意：这里要考虑-和/的情况，后缀表达式中b在a前，所以应该是b-a或b/a</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">GetTop</span>(S);<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="例五：实现递归"><a href="#例五：实现递归" class="headerlink" title="例五：实现递归"></a>例五：实现递归</h4><h5 id="铺垫：多个函数嵌套调用的规则"><a href="#铺垫：多个函数嵌套调用的规则" class="headerlink" title="铺垫：多个函数嵌套调用的规则"></a>铺垫：多个函数嵌套调用的规则</h5><p>当一个函数运行期间调用另一个函数时，在运行被调用函数前，需先完成以下任务：</p>
<ol>
<li>将所有实在参数、返回地址等信息传递给被调用函数<strong>保存</strong></li>
<li>为被调用函数<strong>分配</strong>一个存储区</li>
<li>将<strong>控制转移</strong>到被调用函数</li>
</ol>
<p>在从被调用函数返回调用函数前，需先完成以下任务：</p>
<ol>
<li><strong>保存</strong>被调用函数的计算结果</li>
<li><strong>释放</strong>被调用函数的存储区</li>
<li>按照被调用函数保存的返回地址将<strong>控制转移</strong>到调用函数</li>
</ol>
<p>调用函数与被调用函数间的信息传递和控制转移需要通过<strong>栈</strong>来实现：系统将整个程序运行期间所需要的数据空间安排在一个栈内；每当调用一个函数，就为它在栈顶分配一个存储区；每当从一个函数退出，就从栈顶释放它的存储区；所以当前运行的函数的存储区必在栈顶</p>
<h5 id="递归实现与栈实现"><a href="#递归实现与栈实现" class="headerlink" title="递归实现与栈实现"></a>递归实现与栈实现</h5><p>递归的过程就是函数不断调用自己，是调用函数与被调用函数为同一函数的函数嵌套调用：每当进入一层递归，就产生一个新的工作记录（包括上一层的实在参数、返回地址等）压入栈顶；每当从一层递归退出，就从栈顶弹出一个工作记录</p>
<p>以上都是对递归实现的说明，而<strong>栈实现本质上就是对系统运行递归程序过程的模拟</strong>，所有递归实现都可以转化为栈实现；因此，递归实现与栈实现的时间复杂度、空间复杂度相当（“非递归实现的复杂度都优于递归实现”是<strong>第一个误区</strong>，应该说递推实现的总体复杂度优于递归实现）</p>
<h5 id="递归的形式"><a href="#递归的形式" class="headerlink" title="递归的形式"></a>递归的形式</h5><p>递归的形式有尾递归、头递归、树递归、嵌套递归和间接递归等，大致可以分为线性递归和树形递归：</p>
<ul>
<li><p><strong>线性递归</strong></p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">func</span><span class="hljs-params">()</span> &#123;<br>	<span class="hljs-keyword">func</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="..\img\ep3\image-20221230174944828.png" srcset="/img/loading.gif" lazyload alt="image-20221230174944828" style="zoom:25%;" />

<p>线性递归与递推的时间复杂度相当（“递归实现的时间复杂度都很高”是<strong>第二个误区</strong>）；而因为要利用栈存储，线性递归的空间复杂度远高于递推，数据过大会“爆栈”</p>
</li>
<li><p><strong>树形递归</strong></p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs autoit"><span class="hljs-keyword">func</span><span class="hljs-params">()</span> &#123;<br>	<span class="hljs-keyword">func</span><span class="hljs-params">()</span>;<br>	<span class="hljs-keyword">func</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<img src="..\img\ep3\image-20221230180100513.png" srcset="/img/loading.gif" lazyload alt="image-20221230180100513" style="zoom:25%;" />

<p>树形递归的时间复杂度是指数级别；树形递归的空间复杂度也远高于递推</p>
</li>
</ul>
<h5 id="汉诺塔问题"><a href="#汉诺塔问题" class="headerlink" title="汉诺塔问题"></a>汉诺塔问题</h5><p><strong>问题描述</strong>：有三个塔座 X, Y, Z，塔座 X 上插有 n 个大小各不相同且从上到下大小递增的圆盘，按从小到大编号为 1, 2, …, n；要求将塔座 X 上的 n 个圆盘移至塔座 Z 上，并仍按同样顺序叠排；移动圆盘时遵循以下规则：</p>
<ol>
<li>一次移动一个圆盘</li>
<li>圆盘可以插在 X, Y, Z 中的任一塔座上</li>
<li>任何时刻都不能将一个较大的圆盘压在较小的圆盘之上</li>
</ol>
<img src="..\img\ep3\image-20221231151850066.png" srcset="/img/loading.gif" lazyload alt="image-20221231151850066" style="zoom:25%;" />

<p><strong>递归实现</strong>：</p>
<ul>
<li>当 n &#x3D; 1 时，将一个圆盘从 X 移至 Z</li>
<li>当 n &gt; 1 时，将压在圆盘 n 上的 n-1 个圆盘从 X 移至 Y（递归），将圆盘 n 从 X 移至 Z，再将 Y 上的 n-1 个圆盘从 Y 移至 Z（递归）</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 借助塔座y，将塔座x最上面的n个圆盘移至塔座z</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Hanoi</span><span class="hljs-params">(<span class="hljs-type">int</span> n,<span class="hljs-type">char</span> x,<span class="hljs-type">char</span> y,<span class="hljs-type">char</span> z)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (n==<span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">Move</span>(x,<span class="hljs-number">1</span>,z); <span class="hljs-comment">// 将x上编号为1的圆盘移至z</span><br>    <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">Hanoi</span>(n<span class="hljs-number">-1</span>,x,z,y);<br>        <span class="hljs-built_in">Move</span>(x,n,z); <span class="hljs-comment">// 将x上编号为n的圆盘移至z</span><br>        <span class="hljs-built_in">Hanoi</span>(n<span class="hljs-number">-1</span>,y,x,z);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>递归过程栈的情况</strong>：</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">    <span class="hljs-built_in">int</span> main<span class="hljs-literal">()</span> &#123;<br>        <span class="hljs-constructor">Hanoi(3,&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;)</span>;<br>(<span class="hljs-number">0</span>)     return <span class="hljs-number">0</span>;<br>    &#125;<br>    void <span class="hljs-constructor">Hanoi(<span class="hljs-params">int</span> <span class="hljs-params">n</span>,<span class="hljs-params">char</span> <span class="hljs-params">x</span>,<span class="hljs-params">char</span> <span class="hljs-params">y</span>,<span class="hljs-params">char</span> <span class="hljs-params">z</span>)</span> &#123;<br>(<span class="hljs-number">1</span>)     <span class="hljs-keyword">if</span> (n==<span class="hljs-number">1</span>)<br>(<span class="hljs-number">2</span>)         <span class="hljs-constructor">Move(<span class="hljs-params">x</span>,1,<span class="hljs-params">z</span>)</span>;<br>(<span class="hljs-number">3</span>)     <span class="hljs-keyword">else</span> &#123;<br>(<span class="hljs-number">4</span>)         <span class="hljs-constructor">Hanoi(<span class="hljs-params">n</span>-1,<span class="hljs-params">x</span>,<span class="hljs-params">z</span>,<span class="hljs-params">y</span>)</span>;<br>(<span class="hljs-number">5</span>)         <span class="hljs-constructor">Move(<span class="hljs-params">x</span>,<span class="hljs-params">n</span>,<span class="hljs-params">z</span>)</span>;<br>(<span class="hljs-number">6</span>)         <span class="hljs-constructor">Hanoi(<span class="hljs-params">n</span>-1,<span class="hljs-params">y</span>,<span class="hljs-params">x</span>,<span class="hljs-params">z</span>)</span>;<br>(<span class="hljs-number">7</span>)     &#125;<br>(<span class="hljs-number">8</span>) &#125;<br></code></pre></td></tr></table></figure>

<p>返回地址用 (0) 至 (8) 标记，每个工作记录含实在参数和返回地址，则递归过程栈的情况如下：</p>
<img src="..\img\ep3\image-20221231165641784.png" srcset="/img/loading.gif" lazyload alt="image-20221231165641784" style="zoom:25%;" />

<h5 id="八皇后问题"><a href="#八皇后问题" class="headerlink" title="八皇后问题"></a>八皇后问题</h5><p><strong>问题描述</strong>：在 8×8 格的国际象棋上摆放八个皇后，使其不能互相攻击，即任意两个皇后都不能处于同一行、同一列或同一斜线上，问一共有多少种摆法；输出整个 8×8 棋盘，“Q”表示该位置放皇后，“.”表示该位置不放皇后（以下为拓展的 n 皇后问题的代码）</p>
<p><strong>递归实现</strong>：</p>
<p>“回溯”的思想：</p>
<img src="..\img\ep3\image-20221231194329564.png" srcset="/img/loading.gif" lazyload alt="image-20221231194329564" style="zoom:25%;" />

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">25</span>;<br><br><span class="hljs-type">int</span> n=<span class="hljs-number">8</span>; <span class="hljs-comment">// 皇后数</span><br><span class="hljs-type">char</span> b[N][N]; <span class="hljs-comment">// 棋盘</span><br><span class="hljs-type">bool</span> row[N],col[N],dg[N],udg[N]; <span class="hljs-comment">// 行、列、主对角线和反对角线标记</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">queenProblem</span><span class="hljs-params">(<span class="hljs-type">int</span> x,<span class="hljs-type">int</span> y,<span class="hljs-type">int</span> s)</span> </span>&#123; <span class="hljs-comment">// x表示行，y表示列，s表示已放皇后数</span><br>	<span class="hljs-keyword">if</span> (y==n) &#123;<br>		x++;<br>		y=<span class="hljs-number">0</span>;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (x==n) &#123;<br>		<span class="hljs-keyword">if</span> (s==n) &#123;<br>			<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) &#123;<br>				<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;j++)<br>					cout &lt;&lt; b[i][j];<br>				cout &lt;&lt; endl;<br>			&#125;<br>			cout &lt;&lt; endl;<br>		&#125;<br>		<span class="hljs-keyword">return</span>; <span class="hljs-comment">// 回溯</span><br>	&#125;<br>	<span class="hljs-comment">// 不放</span><br>	<span class="hljs-built_in">queenProblem</span>(x,y+<span class="hljs-number">1</span>,s);<br>	<span class="hljs-comment">// 放</span><br>	<span class="hljs-keyword">if</span> (!row[x]&amp;&amp;!col[y]&amp;&amp;!dg[x-y+n<span class="hljs-number">-1</span>]&amp;&amp;!udg[x+y]) &#123;<br>		b[x][y]=<span class="hljs-string">&#x27;Q&#x27;</span>;<br>		row[x]=col[y]=dg[x-y+n<span class="hljs-number">-1</span>]=udg[x+y]=<span class="hljs-literal">true</span>;<br>		<span class="hljs-built_in">queenProblem</span>(x+<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,s+<span class="hljs-number">1</span>);<br>		b[x][y]=<span class="hljs-string">&#x27;.&#x27;</span>;<br>		row[x]=col[y]=dg[x-y+n<span class="hljs-number">-1</span>]=udg[x+y]=<span class="hljs-literal">false</span>;<br>	&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    cin &gt;&gt; n;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)<br>		<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;j++)<br>			b[i][j]=<span class="hljs-string">&#x27;.&#x27;</span>;<br>	<span class="hljs-built_in">queenProblem</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>栈实现</strong>：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N=<span class="hljs-number">25</span>;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>	<span class="hljs-type">int</span> s[N];<br>	<span class="hljs-type">int</span> t;<br>&#125; Stack;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitStack</span><span class="hljs-params">(Stack &amp;stack)</span> </span>&#123;<br>	stack.t=<span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">StackLength</span><span class="hljs-params">(Stack stack)</span> </span>&#123;<br>	<span class="hljs-keyword">return</span> stack.t+<span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Push</span><span class="hljs-params">(Stack &amp;stack,<span class="hljs-type">int</span> e)</span> </span>&#123;<br>	stack.s[++stack.t]=e;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Pop</span><span class="hljs-params">(Stack &amp;stack)</span> </span>&#123;<br>	<span class="hljs-type">int</span> e=stack.s[stack.t--];<br>	<span class="hljs-keyword">return</span> e;<br>&#125;<br><br><span class="hljs-type">int</span> n=<span class="hljs-number">8</span>; <span class="hljs-comment">// 皇后数</span><br><span class="hljs-type">bool</span> row[N],dg[N],udg[N]; <span class="hljs-comment">// 行、主对角线和反对角线标记</span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">queenProblem</span><span class="hljs-params">()</span> </span>&#123;<br>	Stack s;<br>	<span class="hljs-built_in">InitStack</span>(s);<br>	<br>	<span class="hljs-type">int</span> pos=<span class="hljs-number">-1</span>; <span class="hljs-comment">// 此时pos相当于一个flag</span><br>	<span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>		<span class="hljs-keyword">if</span> (<span class="hljs-built_in">StackLength</span>(s)==n) &#123;<br>			<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) &#123;<br>				<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;n;j++) &#123;<br>					<span class="hljs-keyword">if</span> (i==s.s[j])<br>						cout &lt;&lt; <span class="hljs-string">&quot;Q&quot;</span>;<br>					<span class="hljs-keyword">else</span><br>						cout &lt;&lt; <span class="hljs-string">&quot;.&quot;</span>;<br>				&#125;<br>				cout &lt;&lt; endl;<br>			&#125;<br>			cout &lt;&lt; endl;<br>			pos=<span class="hljs-built_in">Pop</span>(s);<br>			row[pos]=<span class="hljs-literal">false</span>;<br>			dg[pos-<span class="hljs-built_in">StackLength</span>(s)+n<span class="hljs-number">-1</span>]=<span class="hljs-literal">false</span>;<br>			udg[pos+<span class="hljs-built_in">StackLength</span>(s)]=<span class="hljs-literal">false</span>;<br>		&#125;<br>		<span class="hljs-type">int</span> i=(pos==<span class="hljs-number">-1</span>?<span class="hljs-number">0</span>:pos+<span class="hljs-number">1</span>); <span class="hljs-comment">// i=pos会死循环</span><br>		<span class="hljs-keyword">for</span> (;i&lt;n;i++)<br>			<span class="hljs-keyword">if</span> (!row[i]&amp;&amp;!dg[i-<span class="hljs-built_in">StackLength</span>(s)+n<span class="hljs-number">-1</span>]&amp;&amp;!udg[i+<span class="hljs-built_in">StackLength</span>(s)]) &#123;<br>				<span class="hljs-built_in">Push</span>(s,i);<br>				row[i]=<span class="hljs-literal">true</span>;<br>				dg[i-(<span class="hljs-built_in">StackLength</span>(s)<span class="hljs-number">-1</span>)+n<span class="hljs-number">-1</span>]=<span class="hljs-literal">true</span>;<br>				udg[i+<span class="hljs-built_in">StackLength</span>(s)<span class="hljs-number">-1</span>]=<span class="hljs-literal">true</span>;<br>				pos=<span class="hljs-number">-1</span>; <span class="hljs-comment">// 此时pos相当于一个flag</span><br>				<span class="hljs-keyword">break</span>;<br>			&#125;<br>		<span class="hljs-keyword">if</span> (i==n) &#123;<br>			pos=<span class="hljs-built_in">Pop</span>(s);<br>			row[pos]=<span class="hljs-literal">false</span>;<br>			dg[pos-<span class="hljs-built_in">StackLength</span>(s)+n<span class="hljs-number">-1</span>]=<span class="hljs-literal">false</span>;<br>			udg[pos+<span class="hljs-built_in">StackLength</span>(s)]=<span class="hljs-literal">false</span>;<br>		&#125;<br>		<span class="hljs-keyword">if</span> (pos==n<span class="hljs-number">-1</span>&amp;&amp;<span class="hljs-built_in">StackLength</span>(s)==<span class="hljs-number">0</span>)<br>			<span class="hljs-keyword">break</span>;<br>	&#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">if</span> (n==<span class="hljs-number">1</span>) cout &lt;&lt; <span class="hljs-string">&quot;Q&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">else</span> <span class="hljs-built_in">queenProblem</span>();<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="3-队列的定义与实现（先进先出）"><a href="#3-队列的定义与实现（先进先出）" class="headerlink" title="3 - 队列的定义与实现（先进先出）"></a>3 - 队列的定义与实现（先进先出）</h3><h4 id="相关概念-1"><a href="#相关概念-1" class="headerlink" title="相关概念"></a>相关概念</h4><p><strong>队列（Queue）</strong>是限定仅在表的一端插入元素，在另一端删除元素的线性表。允许插入的一端称为<strong>队尾（Rear）</strong>，允许删除的一端称为<strong>队头（Front）</strong>。当队列中没有元素时，称为<strong>空队列</strong>。</p>
<h4 id="抽象数据类型-1"><a href="#抽象数据类型-1" class="headerlink" title="抽象数据类型"></a>抽象数据类型</h4><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs reasonml">ADT Queue &#123;<br>	数据对象：<br>		D=&#123;a_i<span class="hljs-pattern-match">|a<span class="hljs-constructor">_i</span>∈<span class="hljs-constructor">ElemSet</span>,i=1,2,<span class="hljs-operator">...</span>,n&#125;</span><br><span class="hljs-pattern-match">	数据关系：</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">R</span>=&#123;&lt;a<span class="hljs-constructor">_i</span>-1,a<span class="hljs-constructor">_i</span>&gt;|a<span class="hljs-constructor">_i</span>-1,a<span class="hljs-constructor">_i</span>∈<span class="hljs-constructor">D</span>,i=2,<span class="hljs-operator">...</span>,n&#125;</span><br><span class="hljs-pattern-match">		(约定a<span class="hljs-constructor">_1</span>为队列头，a<span class="hljs-constructor">_n</span>为队列尾)</span><br><span class="hljs-pattern-match">	基本操作：</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">InitQueue(&amp;Q)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">DestroyQueue(&amp;Q)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">QueueLength(Q)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">QueueEmpty(Q)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">GetHead(Q,&amp;<span class="hljs-params">e</span>)</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 需判空</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">ClearQueue(&amp;Q)</span></span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">EnQueue(&amp;Q,<span class="hljs-params">e</span>)</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 需判满</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">DeQueue(&amp;Q,&amp;<span class="hljs-params">e</span>)</span> <span class="hljs-operator">/</span><span class="hljs-operator">/</span> 需判空</span><br><span class="hljs-pattern-match">		<span class="hljs-constructor">QueueTravers(Q,<span class="hljs-params">visit</span>()</span>)</span><br><span class="hljs-pattern-match">&#125; <span class="hljs-constructor">ADT</span> <span class="hljs-constructor">Queue</span></span><br></code></pre></td></tr></table></figure>

<h4 id="用顺序存储结构实现队列"><a href="#用顺序存储结构实现队列" class="headerlink" title="用顺序存储结构实现队列"></a>用顺序存储结构实现队列</h4><h5 id="第一种实现：定长数组-1"><a href="#第一种实现：定长数组-1" class="headerlink" title="第一种实现：定长数组"></a>第一种实现：定长数组</h5><p><strong>规定</strong>：队头指针 Front 指向队头元素在队列中的当前位置，队尾指针 Rear 指向队尾元素的下一个位置</p>
<p><strong>判空</strong>：Q.Front&#x3D;&#x3D;Q.Rear</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ----------Sqqueue.h----------</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> SQQUEUE_H_</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SQQUEUE_H_</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAXSIZE 100</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> T;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    T   Queue[MAXSIZE]; <span class="hljs-comment">// 静态分配，相应的动态分配方式为：T* Queue;</span><br>    <span class="hljs-type">int</span> Front,Rear;<br>&#125; SqQueue;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitQueue</span><span class="hljs-params">(SqQueue &amp;Q)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">QueueLength</span><span class="hljs-params">(SqQueue Q)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">QueueEmpty</span><span class="hljs-params">(SqQueue Q)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetHead</span><span class="hljs-params">(SqQueue Q,T &amp;e)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ClearQueue</span><span class="hljs-params">(SqQueue &amp;Q)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">EnQueue</span><span class="hljs-params">(SqQueue &amp;Q,T e)</span></span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">DeQueue</span><span class="hljs-params">(SqQueue &amp;Q,T &amp;e)</span></span>;<br><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// ----------Sqqueue.cpp----------</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;Sqqueue.h&quot;</span></span><br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitQueue</span><span class="hljs-params">(SqQueue &amp;Q)</span> </span>&#123;<br>    Q.Front=Q.Rear=<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">QueueLength</span><span class="hljs-params">(SqQueue Q)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> Q.Rear-Q.Front;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">QueueEmpty</span><span class="hljs-params">(SqQueue Q)</span> </span>&#123;<br>    <span class="hljs-keyword">return</span> Q.Front==Q.Rear?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetHead</span><span class="hljs-params">(SqQueue Q,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Q.Front==Q.Rear) <span class="hljs-comment">// 判空</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    e=Q.Queue[Q.Front];<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ClearQueue</span><span class="hljs-params">(SqQueue &amp;Q)</span> </span>&#123;<br>    Q.Front=Q.Rear=<span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">EnQueue</span><span class="hljs-params">(SqQueue &amp;Q,T e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Q.Rear==MAXSIZE) <span class="hljs-comment">// 判满</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    Q.Queue[Q.Rear++]=e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">DeQueue</span><span class="hljs-params">(SqQueue &amp;Q,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Q.Front==Q.Rear) <span class="hljs-comment">// 判空</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	e=Q.Queue[Q.Front++];<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h5 id="第二种实现：循环队列"><a href="#第二种实现：循环队列" class="headerlink" title="第二种实现：循环队列"></a>第二种实现：循环队列</h5><p><strong>问题1</strong>：Rear&#x3D;&#x3D;MAXSIZE 不一定说明队列中有 MAXSIZE 个元素，称“假溢出”。解决“假溢出”的办法一般有两种：</p>
<ol>
<li>将整个队列左移，使队列的第一个元素重新位于 Queue[0]（效率低）；</li>
<li>设想 Queue[0] 接在 Queue[MAXSIZE-1] 之后，使一维数组 Queue 成为一个首尾相接的环。</li>
</ol>
<p><strong>问题2</strong>：直接处理成循环队列，队满和队空的条件都为：Q.Front&#x3D;&#x3D;Q.Rear。在循环队列中如何判定队满和队空？两种方法：</p>
<ol>
<li>设置一个标志 flag，以区别队列是满还是空。flag 初始化为“delete”；每一次插入操作后，被置为“entry”；每一次删除操作后，被置为“delete”。当出现 Front&#x3D;&#x3D;Rear 时，如果flag此时为“entry”，则可判断队列是满的，否则队列是空的（效率相对较低）；</li>
<li>少用一个数据元素空间，以队尾指针加 1 等于队头指针来表示队列满。</li>
</ol>
<p><strong>判满</strong>：(Q.Rear+1)%MAXSIZE&#x3D;&#x3D;Q.Front</p>
<p><strong>判空</strong>：Q.Front&#x3D;&#x3D;Q.Rear</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 一般队列的入队算法</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">EnQueue</span><span class="hljs-params">(SqQueue &amp;Q,T e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Q.Rear==MAXSIZE) <span class="hljs-comment">// 判满</span><br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    Q.Queue[Q.Rear++]=e;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 循环队列的入队算法</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">EnCycque</span><span class="hljs-params">(SqQueue &amp;Q,T e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> ((Q.Rear+<span class="hljs-number">1</span>)%MAXSIZE==Q.Front) <span class="hljs-comment">// 判满</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    Q.Queue[Q.Rear]=e;<br>    Q.Rear=(Q.Rear+<span class="hljs-number">1</span>)%MAXSIZE;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 一般队列出队算法</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">DeQueue</span><span class="hljs-params">(SqQueue &amp;Q,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Q.Front==Q.Rear) <span class="hljs-comment">// 判空</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	e=Q.Queue[Q.Front++];<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 循环队列出队算法</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">DeCycque</span><span class="hljs-params">(SqQueue &amp;Q,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Q.Front==Q.Rear) <span class="hljs-comment">// 判空</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    e=Q.Queue[Q.Front];<br>    Q.Front=(Q.Front+<span class="hljs-number">1</span>)%MAXSIZE;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="用链式存储结构实现队列"><a href="#用链式存储结构实现队列" class="headerlink" title="用链式存储结构实现队列"></a>用链式存储结构实现队列</h4><p>一个链队列需要两个分别指示队头和队尾的指针；为了操作方便，给链队列添加一个头结点，头指针指向头结点；所以，队列空的判定条件为头指针与尾指针均指向头结点</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> T;<br><br><span class="hljs-comment">// 结点结构</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Qnode</span> &#123;<br>    T Data;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Qnode</span>* Next;<br>&#125; Qnode;<br><br><span class="hljs-comment">// 链队列结构</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> &#123;<br>    Qnode* Front;<br>    Qnode* Rear;<br>&#125; LinkQueue;<br></code></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 链队列初始化</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">InitQueue</span><span class="hljs-params">(LinkQueue &amp;Q)</span> </span>&#123;<br>    Q.Front=(Qnode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Qnode));<br>    <span class="hljs-keyword">if</span> (!Q.Front)<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    Q.Rear=Q.Front;<br>    Q.Front-&gt;Next=<span class="hljs-literal">NULL</span>;<br>&#125;<br><br><span class="hljs-comment">// 链队列销毁</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DestroyQueue</span><span class="hljs-params">(LinkQueue &amp;Q)</span> </span>&#123;<br>    <span class="hljs-keyword">while</span> (Q.Front) &#123;<br>        Q.Rear=Q.Front-&gt;Next;<br>        <span class="hljs-built_in">free</span>(Q.Front);<br>        Q.Front=Q.Rear;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 链队列入队</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">EnQueue</span><span class="hljs-params">(LinkQueue &amp;Q,T e)</span> </span>&#123;<br>    Qnode* p=(Qnode*)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(Qnode));<br>    <span class="hljs-keyword">if</span> (!p)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// 内存无可用空间</span><br>    p-&gt;Data=e;<br>    p-&gt;Next=<span class="hljs-literal">NULL</span>;<br>    Q.Rear-&gt;Next=p;<br>    Q.Rear=p;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-comment">// 链队列出队（当链队列长度大于1时，只需修改头结点的Next域，尾指针不用变化；当链队列长度等于1时，除修改头结点的Next域外，还要修改尾指针）</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">DeQueue</span><span class="hljs-params">(LinkQueue &amp;Q,T &amp;e)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (Q.Front==Q.Rear)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// 判空</span><br>    Qnode* p=Q.Front-&gt;Next;<br>    Q.Front-&gt;Next=p-&gt;Next;<br>    e=p-&gt;Data;<br>    <span class="hljs-keyword">if</span> (Q.Rear==p)<br>        Q.Rear=Q.Front;<br>    <span class="hljs-built_in">free</span>(p);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="顺序队列还是链队列？"><a href="#顺序队列还是链队列？" class="headerlink" title="顺序队列还是链队列？"></a>顺序队列还是链队列？</h4><p>队列广泛应用于程序设计中，是现实世界排队的仿真。当要解决的问题具有先进先出的特点时就可以用队列。</p>
<p>顺序队列、链队列的基本操作的时间复杂度都是 O(1)。当需要访问中间结点时，顺序队列更宜；对于在使用中数据元素变动较大的情况，用链式存储结构比用顺序存储结构更有利。</p>
<h3 id="4-队列的应用举例"><a href="#4-队列的应用举例" class="headerlink" title="4 - 队列的应用举例"></a>4 - 队列的应用举例</h3><h4 id="例一：k-阶斐波那契数列"><a href="#例一：k-阶斐波那契数列" class="headerlink" title="例一：k 阶斐波那契数列"></a>例一：k 阶斐波那契数列</h4><h5 id="背景-2"><a href="#背景-2" class="headerlink" title="背景"></a>背景</h5><p><strong>k 阶斐波那契数列</strong>：约定 $$f_0$$ &#x3D; 0, $$f_1$$ &#x3D; 0, …, $$f_{k-2}$$ &#x3D; 0, $$f_{k-1}$$ &#x3D; 1，则 $$f_n$$ &#x3D; $$f_{n-1}$$ + $$f_{n-2}$$ + … + $$f_{n-k}$$ (n &#x3D; k, k+1, …)</p>
<p><strong>问题描述</strong>：编写求 k 阶斐波那契数列前 n + 1 项（$$f_0$$, $$f_1$$, …, $$f_n$$）的算法，要求满足 $$f_n$$ ≤ max 且 $$f_{n+1}$$ &gt; max（max ≥ 0，为某个约定的常数）</p>
<h5 id="实现-3"><a href="#实现-3" class="headerlink" title="实现"></a>实现</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 第一种实现（循环队列容量为k）</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Fb</span><span class="hljs-params">(<span class="hljs-type">int</span> k,<span class="hljs-type">int</span> max,<span class="hljs-type">int</span> f[])</span> </span>&#123; <span class="hljs-comment">// 返回数列最后一项下标n</span><br>    SqQueue cq;<br>    <span class="hljs-built_in">InitQueue</span>(cq);<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=k<span class="hljs-number">-2</span>;i++) &#123;<br>        f[i]=<span class="hljs-number">0</span>;<br>        cq.Queue[i]=<span class="hljs-number">0</span>;<br>    &#125;<br>    f[k<span class="hljs-number">-1</span>]=<span class="hljs-number">1</span>;<br>    cq.Queue[k<span class="hljs-number">-1</span>]=<span class="hljs-number">1</span>;<br>    cq.Rear=k<span class="hljs-number">-1</span>;<br>    <br>    <span class="hljs-type">int</span> n=k;<br>    <span class="hljs-keyword">while</span> (cq.Queue[cq.Rear]&lt;max) &#123;<br>        f[n]=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;j&lt;=k<span class="hljs-number">-1</span>;j++)<br>            f[n]+=cq.Queue[j];<br>        cq.Rear=(cq.Rear+<span class="hljs-number">1</span>)%k; <span class="hljs-comment">// 因为容量恰好为k，所以将队列中所有数相加即可，cq.Front没有意义</span><br>        cq.Queue[cq.Rear]=f[n++];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cq.Queue[cq.Rear]&gt;max)<br>        n-=<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">else</span><br>        n-=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (max==<span class="hljs-number">1</span>) &#123;<br>        n=k;<br>        f[k]=<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> n;<br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * f_i=f_&#123;i-1&#125;+f_&#123;i-2&#125;+...+f_&#123;i-k&#125;</span><br><span class="hljs-comment"> * f_&#123;i+1&#125;=f_i+f_&#123;i-1&#125;+...+f_&#123;i-k+1&#125;</span><br><span class="hljs-comment"> * 两式相减得：f_&#123;i+1&#125;=2f_i-f_&#123;i-k&#125;</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * 第二种实现（利用f_&#123;i+1&#125;=2f_i-f_&#123;i-k&#125;，循环队列容量为k+1）</span><br><span class="hljs-comment"> */</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Fb</span><span class="hljs-params">(<span class="hljs-type">int</span> k,<span class="hljs-type">int</span> max,<span class="hljs-type">int</span> f[])</span> </span>&#123; <span class="hljs-comment">// 接口不变</span><br>    SqQueue cq;<br>    <span class="hljs-built_in">InitQueue</span>(cq);<br>    <br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;=k<span class="hljs-number">-2</span>;i++) &#123;<br>        f[i]=<span class="hljs-number">0</span>;<br>        cq.Queue[i]=<span class="hljs-number">0</span>;<br>    &#125;<br>    f[k]=f[k<span class="hljs-number">-1</span>]=<span class="hljs-number">1</span>;<br>    cq.Queue[k]=cq.Queue[k<span class="hljs-number">-1</span>]=<span class="hljs-number">1</span>;<br>    cq.Rear=k;<br>    <br>    <span class="hljs-type">int</span> n=k+<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (cq.Queue[cq.Rear]&lt;max) &#123;<br>        <span class="hljs-type">int</span> j=(cq.Rear+<span class="hljs-number">1</span>)%(k+<span class="hljs-number">1</span>);<br>        f[n]=cq.Queue[cq.Rear]*<span class="hljs-number">2</span>-cq.Queue[j];<br>        cq.Rear=j;<br>        cq.Queue[cq.Rear]=f[n++];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (cq.Queue[cq.Rear]&gt;max)<br>        n-=<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">else</span><br>        n-=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (max==<span class="hljs-number">0</span>)<br>        n=k<span class="hljs-number">-2</span>;<br>    <span class="hljs-keyword">return</span> n;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="例二：划分子集"><a href="#例二：划分子集" class="headerlink" title="例二：划分子集"></a>例二：划分子集</h4><h5 id="背景-3"><a href="#背景-3" class="headerlink" title="背景"></a>背景</h5><p>已知集合 A &#x3D; {a1, a2, …, an} 及集合上的关系 R &#x3D; {(ai, aj)|ai, aj∈A, i≠j}，其中 (ai, aj) 表示 ai 与 aj 间存在冲突关系；要求将 A 划分成互不相交的子集 A1, A2, …, Ak (k≤n)，使任何子集中的元素均无冲突关系，同时要求子集个数尽可能少</p>
<h5 id="实现-4"><a href="#实现-4" class="headerlink" title="实现"></a>实现</h5><p>算法描述：（将 a1<del>an 映射到 1</del>n）</p>
<ol>
<li><p>设置以下数据结构：</p>
<ul>
<li>冲突关系矩阵 cf<ul>
<li>cf[i][j] &#x3D; 1 表示 ai, aj 有冲突</li>
<li>cf[i][j] &#x3D; 0 表示 ai, aj 无冲突</li>
</ul>
</li>
<li>循环队列 cq</li>
<li>数组 result</li>
<li>数组 newr</li>
</ul>
</li>
<li><p>初始化：</p>
<ul>
<li>遍历集合 R，初始化 cf，注意 (ai, aj) 表示 cf[i][j] &#x3D; 1 且 cf[j][i] &#x3D; 1（预处理）</li>
<li>cq 元素从队头到队尾初始化为 1~n</li>
<li>result 和 newr 元素初始化为 0</li>
<li>组号 group 初始化为 1</li>
</ul>
</li>
<li><p>cq 第一个元素 1 出队，并将 cf 中第一行的 1 拷入 newr 中对应位置（凡与 cq 第一个元素 1 有冲突的元素在 newr 中对应位置处均为 1）；下一个元素出队：</p>
<ul>
<li>若其在 newr 中对应位置处为 1，即有冲突，则重新入队参加下一次分组</li>
<li>若其在 newr 中对应位置处为 0，即无冲突，则可划归该组，并将 cf 中该元素对应行的 1 拷入 newr 中对应位置</li>
</ul>
<p>如此循环操作，直至 cq 所有元素依次出队，由 newr 中为 0 的单元对应的元素构成第 1 组，将 group 值 1 写入 result 中值为 0 的对应单元中</p>
</li>
<li><p>group 自增，newr 清零，对 cq 中元素重复上述操作，直至队空</p>
</li>
</ol>
<h5 id="实现-5"><a href="#实现-5" class="headerlink" title="实现"></a>实现</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SubsetPartition</span><span class="hljs-params">(<span class="hljs-type">int</span> n,<span class="hljs-type">int</span> cf[][N],<span class="hljs-type">int</span> result[])</span> </span>&#123;<br>	SqQueue cq;<br>	<span class="hljs-type">int</span> newr[N],group=<span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i) &#123;<br>		cq.Queue[i]=i;<br>		result[i]=<span class="hljs-number">0</span>;<br>		newr[i]=<span class="hljs-number">0</span>;<br>	&#125;<br>	cq.Front=<span class="hljs-number">1</span>;<br>	cq.Rear=(n+<span class="hljs-number">1</span>)%N;<br>	<br>	<span class="hljs-keyword">while</span> (!<span class="hljs-built_in">QueueEmpty</span>(cq)) &#123;<br>		<span class="hljs-type">int</span> len=<span class="hljs-built_in">QueueLength</span>(cq); <span class="hljs-comment">// (cq.Rear+N-cq.Front)%N</span><br>		<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;++i) &#123;<br>			<span class="hljs-type">int</span> t=<span class="hljs-built_in">DeCycque</span>(cq);<br>			<span class="hljs-keyword">if</span> (newr[t])<br>				<span class="hljs-built_in">EnCycque</span>(cq,t);<br>			<span class="hljs-keyword">else</span><br>				<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=n;++j)<br>					<span class="hljs-keyword">if</span> (cf[t][j])<br>						newr[j]=<span class="hljs-number">1</span>;<br>		&#125;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>			<span class="hljs-keyword">if</span> (!newr[i]&amp;&amp;!result[i]) <span class="hljs-comment">// 将group值写入result中值为0的对应单元中</span><br>				result[i]=group;<br>		++group;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;++i)<br>			newr[i]=<span class="hljs-number">0</span>;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="5-其他运算受限的线性表"><a href="#5-其他运算受限的线性表" class="headerlink" title="5 - 其他运算受限的线性表"></a>5 - 其他运算受限的线性表</h3><ol>
<li><p>双端队列：允许在队列两端自由地插入和删除</p>
<img src="..\img\ep3\image-20230104175516366.png" srcset="/img/loading.gif" lazyload alt="image-20230104175516366" style="zoom:25%;" />
</li>
<li><p>双栈：允许在两端插入和删除，但在哪端插入就在哪端删除（两个底部相连的栈）</p>
<img src="..\img\ep3\image-20230104175538054.png" srcset="/img/loading.gif" lazyload alt="image-20230104175538054" style="zoom:25%;" />
</li>
<li><p>超队列：允许在队列两端插入、一端删除</p>
<img src="..\img\ep3\image-20230104175554562.png" srcset="/img/loading.gif" lazyload alt="image-20230104175554562" style="zoom:25%;" />
</li>
<li><p>超栈：允许在队列一端插入、两端删除（对栈溢出的一种特殊处理，即当栈溢出时，可将栈中保存最久的元素删除）</p>
<img src="..\img\ep3\image-20230104175620938.png" srcset="/img/loading.gif" lazyload alt="image-20230104175620938" style="zoom:25%;" /></li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" class="category-chain-item">数据结构与算法</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/">#数据结构课程笔记</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>栈和队列</div>
      <div>https://louisxxr.github.io/2023/03/02/栈和队列/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Xianrui Xie</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年3月2日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/03/02/%E4%B8%B2/" title="串">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">串</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/03/02/%E7%BA%BF%E6%80%A7%E8%A1%A8/" title="线性表">
                        <span class="hidden-mobile">线性表</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
